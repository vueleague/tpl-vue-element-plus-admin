import{F as e}from"./Form-edba205d.js";import{d as o,ag as t,r as a,x as n,A as s,o as i,c as l,g as r,w as c,a as d,Y as m,h as u,G as p,F as h,ao as f,bM as y,B as g,t as x,k as b}from"./index-d7be3000.js";import{E as k}from"./el-button-f75734e0.js";import{u as v}from"./useForm-ceeecdcf.js";const w={key:0},F=o({__name:"Search",props:{schema:{type:Array,default:()=>[]},isCol:t.bool.def(!1),labelWidth:t.oneOfType([String,Number]).def("auto"),layout:t.string.validate((e=>["inline","bottom"].includes(e))).def("inline"),buttomPosition:t.string.validate((e=>["left","center","right"].includes(e))).def("center"),showSearch:t.bool.def(!0),showReset:t.bool.def(!0),expand:t.bool.def(!1),expandField:t.string.def(""),inline:t.bool.def(!0),model:{type:Object,default:()=>({})}},emits:["search","reset"],setup(o,{emit:t}){const F=o,{t:_}=b(),C=a(!0),R=n((()=>{let e=f(F.schema);if(F.expand&&F.expandField&&!d(C)){const o=y(e,(e=>e.field===F.expandField));if(o>-1){const t=e.length;e.splice(o+1,t)}}return"inline"===F.layout&&(e=e.concat([{field:"action",formItemProps:{labelWidth:"0px"}}])),e})),{register:j,elFormRef:S,methods:q}=v({model:F.model||{}}),A=async()=>{var e;await(null==(e=d(S))?void 0:e.validate((async e=>{if(e){const{getFormData:e}=q,o=await e();t("search",o)}})))},P=async()=>{var e;null==(e=d(S))||e.resetFields();const{getFormData:o}=q,a=await o();t("reset",a)},W=n((()=>({textAlign:F.buttomPosition}))),D=()=>{var e;null==(e=d(S))||e.resetFields(),C.value=!d(C)};return(t,a)=>{const n=s("Icon");return i(),l(h,null,[r(d(e),{"is-custom":!1,"label-width":o.labelWidth,"hide-required-asterisk":"",inline:o.inline,"is-col":o.isCol,schema:d(R),onRegister:d(j)},{action:c((()=>["inline"===o.layout?(i(),l("div",w,[o.showSearch?(i(),u(d(k),{key:0,type:"primary",onClick:A},{default:c((()=>[r(n,{icon:"ep:search",class:"mr-5px"}),g(" "+x(d(_)("common.query")),1)])),_:1})):p("",!0),o.showReset?(i(),u(d(k),{key:1,onClick:P},{default:c((()=>[r(n,{icon:"ep:refresh-right",class:"mr-5px"}),g(" "+x(d(_)("common.reset")),1)])),_:1})):p("",!0),o.expand?(i(),u(d(k),{key:2,text:"",onClick:D},{default:c((()=>[g(x(d(_)(C.value?"common.shrink":"common.expand"))+" ",1),r(n,{icon:C.value?"ant-design:up-outlined":"ant-design:down-outlined"},null,8,["icon"])])),_:1})):p("",!0)])):p("",!0)])),_:1},8,["label-width","inline","is-col","schema","onRegister"]),"bottom"===o.layout?(i(),l("div",{key:0,style:m(d(W))},[o.showSearch?(i(),u(d(k),{key:0,type:"primary",onClick:A},{default:c((()=>[r(n,{icon:"ep:search",class:"mr-5px"}),g(" "+x(d(_)("common.query")),1)])),_:1})):p("",!0),o.showReset?(i(),u(d(k),{key:1,onClick:P},{default:c((()=>[r(n,{icon:"ep:refresh-right",class:"mr-5px"}),g(" "+x(d(_)("common.reset")),1)])),_:1})):p("",!0),o.expand?(i(),u(d(k),{key:2,text:"",onClick:D},{default:c((()=>[g(x(d(_)(C.value?"common.shrink":"common.expand"))+" ",1),r(n,{icon:C.value?"ant-design:up-outlined":"ant-design:down-outlined"},null,8,["icon"])])),_:1})):p("",!0)],4)):p("",!0)],64)}}});export{F as _};
